.lerp2(@a, @b) {
  @r: calc((@a) + ((@b) - (@a)) * var(--dsm-compact-mode-multiplier));
}

// force an increase in specificity
.compact-view-enabled.compact-view-enabled.compact-view-enabled.compact-view-enabled.compact-view-enabled {
  .dcg-smart-textarea-container {
    font-size: var(--text-font-size);
  }
  .dcg-mq-bracket-container {
    font-size: calc(
      max(var(--bracket-font-size-factor), var(--minimum-font-size))
    );
  }
  .dcg-main,
  .dcg-evaluation-container {
    font-size: var(--math-font-size);
  }

  &.compact-view-no-separating-lines {
    .dcg-expressionitem:not(.dcg-selected) {
      border: none;
    }
    &.compact-view-highlight-alternating-lines
      .dcg-expressionitem:not(.dcg-expressionfolder):nth-child(2n) {
      background-color: #f5f5f5;
    }
    .dcg-expressionfolder {
      background-color: #e9e8f8;
    }
  }

  &.compact-view-remove-spacing-enabled {
    // make cursor/caret more obvious since it'll be smaller
    .dcg-mq-cursor {
      border: 1.5px solid black;
      margin: 0 -1.5px;
    }

    .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout):after {
      width: 25px;
      right: -12.5px;
      background: linear-gradient(to right, #ffffff00, #ffffffff 50%);
    }
    .dcg-main,
    .dcg-evaluation-container {
      padding-top: .lerp2(15px, 0px) [];
      padding-left: .lerp2(53px, 35px) [];
      padding-bottom: .lerp2(9px, 0px) [];
      padding-right: .lerp2(35px, 12.5px) [];
      margin-left: 4px;
    }

    // expressions in general
    .dcg-inFolder .dcg-main {
      margin-left: .lerp2(20px, 30px) [];
    }
    .dcg-caret-container {
      transform: scale(.lerp2(1, 0.8) []);
      padding-left: .lerp2(10px, 0px) [];
      padding-top: .lerp2(18px, 4px) [];
    }
    .dcg-fade-container {
      padding-bottom: 0;
    }
    &:not(.compact-view-no-separating-lines) {
      .dcg-expressionitem:not(.dcg-selected) {
        border-top-color: #777777;
      }
    }
    .dcg-expressionitem.dcg-inFolder .dcg-fade-container:after {
      border-left-color: #000000aa;
    }

    // icons to the left of the expressions bar
    .dcg-expression-icon-container {
      right: .lerp2(0%, -10%) [];
      left: unset;
      top: 50%;
      transform: scale(.lerp2(1, 0.5) []);
      .dcg-tooltip-hit-area-container {
        transform: scale(.lerp2(1, 1.3) []);
      }
    }
    .dcg-icon-text {
      right: 10%;
      left: unset;
    }

    // "x" icon to the right of the expressions
    .dcg-icon-remove {
      transform: translate(.lerp2(0px, 10px) [], .lerp2(0px, -10px) [])
        scale(.lerp2(1, 0.6) []);
    }

    // slider
    .dcg-slider-container {
      min-height: 0;
    }
    .dcg-track .dcg-graphic {
      height: 2px;
      background-color: #999999;
    }
    .dcg-thumb .dcg-graphic {
      width: 0;
      height: 0;
    }
    .dcg-thumb .dcg-center {
      transform: translateY(-2px) scale(0.4);
    }
    .dcg-thumb:hover .dcg-center {
      transform: translateY(-2px) scale(0.8);
    }

    // evaluation box
    .dcg-evaluation-container {
      .dcg-typeset-math {
        padding: 0;
      }

      margin-top: -5px;
    }

    // tables
    .dcg-cell {
      padding: 0px;
    }
    .dcg-table-icon-container {
      transform: scale(0.5);
      margin-left: -10px;
      z-index: 2;
    }

    // settings
    .dcg-expression-edit-actions .dcg-exp-action-button {
      padding: .lerp2(12px, 0px) [] .lerp2(10px, 0px) [];
      width: .lerp2(44px, 14px) [];
      height: .lerp2(44px, 14px) [];
      transform: scale(.lerp2(1, 0.7) []) translateY(.lerp2(0px, -5px) []);
    }
  }
}
